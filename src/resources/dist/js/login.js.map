{"version":3,"sources":["login.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourcesContent":["var observeLogin = function (form, url, secureUrl) {\n    $(form).submit(function (e) {\n        $('#errorsContainer').hide();\n        $('.login-btn[type=\"submit\"]').attr('disabled', true);\n        $('.login-spinner').show();\n        $('.login-btn-label').hide();\n        e.preventDefault();\n        $.ajax({\n            type: \"POST\",\n            url: url,\n            data: $(this).serialize(),\n            success: function (response) {\n                $('.login-btn[type=\"submit\"]').attr('disabled', false);\n                $('.login-spinner').hide();\n                $('.login-btn-label').show();\n                var refresh = response['refresh'];\n                var errors = response['errors'];\n                var enterSecureToken = response['enterSecureToken'];\n\n                var errorHtml = '<ul>';\n                for (var i in errors) {\n                    errorHtml = errorHtml + '<li>' + errors[i] + '</li>';\n                }\n                errorHtml = errorHtml + '</ul>';\n\n                if (errors) {\n                    $('#errorsContainer').html(errorHtml);\n                    $('#errorsContainer').show();\n                    $('#password').val('');\n                    $('#email').focus();\n                }\n\n                if (enterSecureToken) {\n                    $('#secureForm').show();\n                    $('#loginForm').hide();\n                }\n\n                if (refresh) {\n                    $('#success').show();\n                    $('#secureForm').hide();\n                    $('#loginForm').hide();\n                    $('.login-logo').hide();\n                    location.reload();\n                }\n            },\n            dataType: \"json\"\n        });\n    });\n\n    $('#secureForm').submit(function (e) {\n        $('#errorsSecureContainer').hide();\n        $('.login-btn[type=\"submit\"]').attr('disabled', true);\n        $('.login-spinner').show();\n        $('.login-btn-label').hide();\n        e.preventDefault();\n        $.ajax({\n            type: \"POST\",\n            url: secureUrl,\n            data: $(this).serialize(),\n            success: function (response) {\n                $('.login-spinner').hide();\n                $('.login-btn-label').show();\n                $('.login-btn[type=\"submit\"]').attr('disabled', false);\n                var refresh = response['refresh'];\n\n                if (response['errors']) {\n                    $('#errorsSecureContainer').html('<ul><li>' + response['errors'] + '</li></ul>');\n                    $('#errorsSecureContainer').show();\n                }\n\n                if (refresh) {\n                    $('#success').show();\n                    $('#secureForm').hide();\n                    $('#loginForm').hide();\n                    $('.login-logo').hide();\n                    location.reload();\n                }\n            },\n            dataType: \"json\"\n        })\n    });\n\n    $('#abortToken').click(function (e) {\n        $('.spinner').hide();\n        $('.submit-icon').show();\n        $('#errorsContainer').hide();\n        $('#secureForm').hide();\n        $('#loginForm').show();\n        $('#success').hide();\n    });\n};\n\nvar checkInputLabels = function () {\n    var $loginInput = $('.login-input');\n\n    var check = function($element) {\n        var val = $element.val() ? $element.val() : '';\n\n        var autofillBg = window.getComputedStyle($element[0], null).getPropertyValue(\"background-color\") === 'rgb(250, 255, 189)' ? true : false;\n\n        if(val.length >= 1 || autofillBg === true) {\n            $element.addClass('is-not-empty').removeClass('is-empty');\n        } else {\n            $element.addClass('is-empty').removeClass('is-not-empty');\n        }\n    };\n\n    $loginInput.on('keyup paste change click', function() {\n        check($(this));\n    });\n\n    $loginInput.each( function() {\n        check($(this));\n    });\n};\n\n$(window).on('load', function () {\n    $('.login-logo').addClass('login-logo-loaded');\n    $('.login-form').addClass('login-form-loaded');\n    checkInputLabels();\n});\n"]}